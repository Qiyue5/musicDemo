var songList,$=window.Zepto,root=window.player,$scope=$(document.body),index=0,audio=new root.audioControl;function bindEvent(){$scope.on("click",".like-btn",function(){$scope.find(".like-btn").toggleClass("liking")}),$scope.on("click",".prev-btn",function(){0===index?index=songList.length-1:index--,root.render(songList[index]),root.process.renderAllTime(songList[index].duration),audio.getAudio(songList[index].audio),audio.play(),$scope.find(".play-btn").addClass("playing"),root.process.start(),root.process.upData(0)}),$scope.on("click",".next-btn",function(){index===songList.length-1?index=0:index++,root.render(songList[index]),root.process.renderAllTime(songList[index].duration),audio.getAudio(songList[index].audio),audio.play(),$scope.find(".play-btn").addClass("playing"),root.process.start(),root.process.upData(0)}),$scope.on("click",".play-btn",function(){"play"==audio.status?(audio.pause(),root.process.stop(),$scope.find(".play-btn").removeClass("playing")):(audio.getAudio(songList[index].audio),audio.play(),root.process.start(),$scope.find(".play-btn").addClass("playing"))})}function bindTouch(){var o=$scope.find(".slider-pointer"),n=$scope.find(".pro-wrapper").offset(),t=n.left,i=n.width;o.on("touchstart",function(){root.process.stop()}).on("touchmove",function(o){o=(o.changedTouches[0].clientX-t)/i;root.process.upData(o=o<0||1<o?0:o)}).on("touchend",function(o){var n=(o.changedTouches[0].clientX-t)/i,o=songList[index].duration;audio.playTo((n=n<0||1<n?0:n)*o),root.process.start(n),$scope.find(".play-btn").addClass("playing")})}function getData(o){$.ajax({type:"GET",url:o,success:function(o){songList=o,root.render(songList[0]),root.process.renderAllTime(songList[index].duration),bindEvent(),bindTouch()},error:function(){}})}getData("../mock/data.json");